<template lang="html">
<div>
  <navbar class="abs"></navbar>
  <div id="home__hero">
    <svg id="home__hero__logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 524 208"><g fill="#fff">
      <path d="m 421.05515,182.94808 c -6.15278,-1.85472 -11.9232,-6.84419 -14.51458,-12.55022 -2.19006,-4.82241 -2.48545,-9.12193 -2.51129,-36.5538 L 404,102.7555 l 3.66667,0.42189 3.66666,0.4219 L 412,134.93262 c 0.44715,21.01614 1.20027,32.26392 2.28723,34.15954 3.98389,6.94774 19.64221,9.56842 26.22626,4.3894 C 447.56224,167.93701 448,165.56988 448,132.99884 v -30.06622 h 4 4 l -0.008,29 c -0.004,16.12067 -0.62859,31.23676 -1.40607,34.03644 -1.74034,6.26695 -8.49078,14.11443 -14.1895,16.49551 -4.71532,1.97019 -13.6676,2.19397 -19.34184,0.48351 z"/>
      <path d="m 298.66667,180.4674 c 0,-4.08342 10.6226,-76.60182 11.3234,-77.30262 0.35734,-0.35735 7.66474,13.84422 16.23865,31.55906 8.57391,17.71482 15.93995,32.20878 16.36897,32.20878 0.42904,0 7.94676,-14.3733 16.70607,-31.94068 8.75929,-17.56737 16.14323,-31.72344 16.40875,-31.45792 0.90841,0.90841 11.8729,78.0354 11.19064,78.71768 -0.37451,0.37451 -2.05374,0.68092 -3.73162,0.68092 -3.49858,0 -3.11901,1.54012 -7.22953,-29.33333 -1.51337,-11.36667 -3.07913,-22.16667 -3.47947,-24 -0.5902,-2.70281 -3.43948,2.07464 -15.06301,25.25659 -14.09688,28.11476 -14.36963,28.5358 -16.41096,25.33333 -1.14171,-1.79112 -7.75324,-14.64443 -14.69231,-28.56291 -14.45688,-28.99782 -12.64908,-29.35019 -16.96292,3.30632 -3.77804,28.60036 -3.61853,28 -7.43928,28 -2.25058,0 -3.22738,-0.74612 -3.22738,-2.46522 z"/>
      <path d="m 41.564421,154.365 c -11.566244,-3.76542 -20.665104,-12.54802 -25.65752,-24.76571 -3.13737,-7.67793 -2.514157,-24.76715 1.176459,-32.259825 7.165147,-14.54667 19.811479,-22.59401 36.861521,-23.45638 12.908719,-0.65291 23.441075,2.69485 31.56289,10.03242 5.878305,5.3107 6.199661,6.3663 2.535138,8.32749 -2.151753,1.15159 -3.700286,0.58246 -8.607937,-3.16363 -11.883061,-9.07055 -26.314739,-10.5208 -39.186581,-3.9379 -24.787192,12.67664 -24.737496,47.213755 0.08579,59.624495 13.439474,6.71924 31.013584,4.39404 41.309507,-5.4656 3.562471,-3.41151 3.704373,-3.43438 6.365969,-1.02566 l 2.722279,2.46363 -4.208291,4.34185 c -6.39952,6.60263 -16.019004,10.22104 -28.523648,10.72932 -6.698938,0.2723 -12.812554,-0.26502 -16.435578,-1.4445 z"/>
      <path d="m 470.29692,181.96597 c -0.3126,-0.56833 6.76716,-16.63335 15.7328,-35.70001 l 16.30116,-34.66667 -14.49877,-0.377 -14.49878,-0.377 v -3.95633 -3.95634 h 20.59863 20.59864 l -1.84285,4.33334 c -1.01358,2.38333 -8.4453,18.43333 -16.51494,35.66666 l -14.67209,31.33334 16.00084,0.37505 16.00085,0.37505 -0.41788,3.62495 -0.41786,3.62495 -20.9007,0.36668 c -11.49538,0.20168 -21.15646,-0.0983 -21.46905,-0.66667 z"/>
      <path d="m 186.66667,153.57848 c 0,-2.11216 10.6286,-76.325815 11.16788,-77.979185 0.2392,-0.73333 7.90554,13.57451 17.03634,31.795195 l 16.60146,33.12853 15.88388,-32.77514 c 8.73614,-18.026325 16.26421,-32.334165 16.72905,-31.795195 0.46484,0.53897 3.09063,17.17994 5.83509,36.979935 2.74446,19.8 5.30015,37.35 5.67932,39 0.59642,2.59539 0.15227,3 -3.29306,3 -4.51772,0 -4.25448,1.07831 -9.19939,-37.68145 -1.28539,-10.0752 -2.66035,-18.279735 -3.05548,-18.232305 -0.39513,0.0474 -6.41843,11.821565 -13.38509,26.164745 -6.96667,14.34319 -13.35083,27.03048 -14.18703,28.194 -1.25191,1.74196 -4.05335,-2.93687 -15.86567,-26.49808 -7.88992,-15.73747 -14.61405,-27.838715 -14.9425,-26.891665 -0.32844,0.947035 -2.1889,13.547035 -4.13432,27.999995 L 194,154.26596 l -3.66667,0.42189 c -2.11644,0.24352 -3.66666,-0.22551 -3.66666,-1.10937 z"/>
      <path d="m 154.75937,81.772525 c -0.78432,-1.46552 -1.42604,-9.02793 -1.42604,-16.80536 0,-11.73644 0.47931,-15.09523 2.81896,-19.75432 4.63896,-9.2378 8.48399,-13.47702 15.87003,-17.49701 l 7.00964,-3.81513 -0.91464,4.8755 -0.91465,4.8755 5.53206,-0.88461 5.53206,-0.88462 -2.0356,3.93642 -2.0356,3.93641 8.11824,-0.58722 8.11824,-0.58722 -2.86734,4.02679 -2.86733,4.0268 6.06452,0.90943 c 3.33548,0.50019 5.87857,1.35791 5.65129,1.90605 -0.22726,0.54815 -7.375,7.58459 -15.88385,15.63655 -15.39327,14.5667 -17.62061,15.93435 -30.10332,18.48435 -3.40932,0.69646 -4.52017,0.34394 -5.66667,-1.79831 z m -43.22204,12.25299 c -1.70959,-1.70959 -0.81734,-7.83067 1.75687,-12.05256 1.43966,-2.36116 5.0518,-6.05636 8.02697,-8.21157 2.97518,-2.15521 4.67537,-4.16324 3.77821,-4.4623 -1.05458,-0.35152 -0.83021,-0.85111 0.6347,-1.41325 1.24626,-0.47823 2.26592,-0.36711 2.26592,0.24693 0,0.61405 3.45,0.30459 7.66667,-0.68768 10.9248,-2.57084 11.65885,-2.43732 8.52229,1.55016 -1.46919,1.86777 -3.05021,5.12136 -3.5134,7.2302 -0.71701,3.26455 -1.67175,3.97165 -6.42552,4.7589 -7.08744,1.17371 -9.33782,2.38584 -16.23843,8.7466 -3.08199,2.84088 -5.99541,4.77344 -6.47428,4.29457 z m 39.12934,12.941345 c 0,-1.69525 7.18361,-5.39166 10.26712,-5.28306 1.8748,0.066 1.72534,0.35494 -0.68342,1.32106 -1.69562,0.6801 -3.98849,2.14207 -5.09524,3.24882 -2.28896,2.28897 -4.48846,2.63845 -4.48846,0.71318 z m -49.77778,7.07687 C 100.4,113.55485 100,112.28138 100,111.21381 c 0,-1.57419 0.37799,-1.62733 2,-0.28119 1.1,0.91292 2,2.18639 2,2.82993 0,1.38069 -1.84486,1.54743 -3.11111,0.28118 z m 51.79222,3.22223 c 1.95433,-6.81109 13.35502,-13.25629 15.96853,-9.02756 2.19957,3.55899 -7.46111,12.01244 -13.73949,12.02257 -2.57122,0.004 -2.94536,-0.49857 -2.22904,-2.99501 z m -21.26928,8.99911 c 2.53988,-1.96355 2.52944,-2.05063 -0.55954,-4.66667 -5.3066,-4.49412 -18.50987,-2.79949 -16.61717,2.1328 1.68623,4.39426 12.67369,6.0151 17.17671,2.53387 z m 12.04056,43.17661 c -7.73006,-1.8132 -12.49806,-5.26838 -22.10621,-16.01947 -6.6377,-7.42729 -9.33931,-11.71864 -11.5961,-18.41975 -1.85282,-5.50157 -2.4747,-9.20552 -1.67951,-10.00317 0.69452,-0.69667 1.18378,-3.69667 1.08724,-6.66667 l -0.17552,-5.4 -0.84294,4.66667 c -1.26311,6.99286 -2.80602,1.84419 -2.80602,-9.36369 0,-10.196585 2.22466,-13.877075 3.02224,-5.00003 l 0.51188,5.69705 0.21252,-6 c 0.25269,-7.133795 -1.63474,-11.186005 -3.72622,-7.999995 -0.7221,1.1 -1.3221,4.25 -1.33333,6.999995 -0.0112,2.75 -0.62042,5 -1.35375,5 -4.744029,0 4.00255,-23.916465 11.17831,-30.565745 4.63365,-4.29368 4.41356,-2.96515 -0.54177,3.27033 -5.3799,6.76973 -6.16137,10.46662 -3.1648,14.9718 1.33781,2.01133 2.29412,4.85696 2.12512,6.323615 -0.19495,1.69199 0.35707,1.20447 1.5103,-1.333845 0.99966,-2.20028 2.87182,-4.87547 4.16037,-5.94487 2.06361,-1.71265 2.81587,-1.67286 6.31236,0.33385 4.49319,2.57874 8.13706,2.8803 11.70841,0.96897 2.20283,-1.17892 2.60008,-0.4264 3.99086,7.560025 3.98417,22.8788 15.83181,40.39929 30.97337,45.80394 4.25533,1.51891 4.73532,2.09945 3.55663,4.30187 -2.84879,5.323 -11.35182,13.48886 -16.47583,15.82252 -5.90468,2.68918 -7.00913,2.76485 -14.54761,0.9966 z"/>
      <path d="M 300,78 H 510" stroke="#fff" stroke-width="2px" fill="transparent" style="stroke-linecap: round; stroke-dashoffset: 420;" />
      <path d="M 14,182 H 276"  stroke="#fff" stroke-width="2px" fill="transparent" style="stroke-linecap: round; stroke-linecap: round; stroke-dashoffset: 524;" />
    </g></svg>
    <a id="home__hero__scroll" onclick="window.scrollTo(0,document.querySelector('#home__hero ~ div').offsetTop)"><img src="/icons/scroll-down.svg" alt="">Découvrir</a>
    <video id="home__hero_bg" poster="/images/poster-video-accueil.jpg" autoplay loop>
      <source src="/videos/video_webmaster_15s_webm.webm" type="video/webm">
      <source src="/videos/video_webmaster_15s_mp4.mp4" type="video/mp4">
    </video>
  </div>

  <pane :type="'pane--left'" :bgImage="'/images/danseurs-2018.jpg'" :text="presentation"></pane>
  <pane :type="'pane--right'" :bgImage="'/images/spectacleAaZ.jpg'" :text="maquillage"></pane>

  <section id="testimonial">
    <div class="quote">
      <p>J'ai pris hier soir un grand plaisir, le spectacle est de grande qualité, son, lumière, costumes magnifiques, décors, le tout au service d'artistes de talents : musiciens, danseurs, chanteurs, acteurs- chanteurs.</p>
      <img src="/icons/quote_open.svg" alt="">
      <div class="quote__author">
        <img src="/images/debouck.jpg" alt="">
        <span>Frank Debouck &ndash; Directeur de l'École centrale de Lyon</span>
      </div>
    </div>
  </section>

  <section id="sponsors">
    <div id="sponsors__text">
      <h2>Ils nous ont soutenus</h2>
      <p>Vous aussi, entrez en scène à nos côtés !</p>
      <p>Téléchargez la <a class="inline-link" href="/Plaquette 2019.pdf" download>plaquette sponsors</a>, ou contactez nos responsables partenariat <a class="inline-link" href="mailto:partenariat@commuz.fr">Clarisse et Éloi</a>.</p>
    </div>
    <div id="sponsors__logos">
      <a href="https://www.ec-lyon.fr/" target="_blank" rel="noopener"><img src="/logos/ecl.svg" alt="Logo de l'École centrale de Lyon"></a>
      <a href="https://www.em-lyon.com" target="_blank" rel="noopener"><img src="/logos/em_corpo.svg" alt="Logo de la corpo emlyon business school"></a>
      <a href="http://www.crous-lyon.fr/" target="_blank" rel="noopener"><img src="/logos/crous.png" alt="Logo du Crous de Lyon"></a>
      <a href="https://www.universite-lyon.fr/" target="_blank" rel="noopener"><img src="/logos/udl.svg" alt="Logo de l'Université de Lyon"></a>
      <!--<img src="/logos/petitballon.svg" alt="Logo de Le Petit Ballon">-->
    </div>
  </section>
</div>
</template>

<script>
import Navbar from '@/components/Navbar'
import Pane from '@/components/Pane'
import bus from '@/components/bus'
import anime from 'animejs'

function startAnim () {
  // animate hero logo
  if (!document.hidden) {
    document.removeEventListener('visibilitychange', startAnim)

    let lettersElt = document.querySelectorAll('#home__hero__logo path:not(:nth-child(6)):not(:nth-last-child(-n+2)')
    let linesElt = document.querySelectorAll('#home__hero__logo path:nth-last-child(-n+2)')

    var timeline = anime.timeline()

    timeline.add({
      targets: lettersElt,
      opacity: {
        value: ['0', '1'],
        duration: 500
      },
      translateY: {
        value: ['-30%', '0'],
        duration: 800
      },
      delay: function (el, i, l) {
        return i * 300
      },
      easing: 'easeOutQuart'
    }).add({
      targets: linesElt[0],
      'stroke-dasharray': {
        value: ['210, 315, 0', '210, 210, 210'],
        duration: 1000
      },
      easing: 'linear',
      offset: '0'
    }).add({
      targets: linesElt[1],
      'stroke-dasharray': {
        value: ['262, 393, 0', '262, 262, 262'],
        duration: 1500
      },
      easing: 'linear',
      offset: '0'
    })
  }
}

let data = {
  presentation: '<h2>La Commuz\', c\'est quoi ?</h2>' +
    '<p>La Commuz\' est une comédie musicale organisée chaque année depuis 17 ans par une équipe de 80 étudiants de l\'École centrale de Lyon et de emlyon business school.</p>' +
    '<p>L\'année dernière, la Commuz\' 2018, Bas les Masques, a conquis plus de 1000 spectateurs lors de trois soirées de spectacle.</p>',
  maquillage: '<h2>Un spectacle imaginé de A à Z</h2>' +
    '<p>De l\'élaboration du scénario en passant par les chorégraphies, la musique, la composition des musiques, la mise en place de l\'éclairage et du son, la création des costumes et des décors&hellip;</p>' +
    '<p>Tous les corps de métier du théâtre, du chant et de la danse sont réunis pour créer ce spectacle qui se veut d\'une qualité professionnelle.</p>'
}

export default {
  components: { Navbar, Pane },
  data: function () {
    return data
  },
  mounted: function () {
    // document.addEventListener('visibilitychange', startAnim)
    // startAnim()
    bus.$on('loaded', function (load) {
      if (load === true) {
        document.addEventListener('visibilitychange', startAnim)
        startAnim()
      }
    })
  }

}
</script>

<style lang="scss">
#home__hero {
  position: relative;
  width: 100%;
  height: 80vh;
  @media (orientation: landscape) {
    height: 100vh;
  }
  margin-bottom: 2em;
  display: grid;
  grid-template-columns: 100%;
  grid-template-rows: 1fr auto 1fr;
  align-items: center;
  justify-items: center;

  #home__hero__logo {
    grid-area: 2 / 1 / 3 / -1;
    z-index: 1;
    width: 75%;
    @media (min-width: 992px) {
      width: 50%;
    }
  }

  #home__hero__scroll {
    grid-area: 3 / 1 / -1 / -1;
    z-index: 1;
    align-self: flex-start;
    // color: #e6e6e6;
    font-size: 1.5em;
    margin-top: 1.5em;
    cursor: pointer;
    user-select: none;

    img {
      transition: transform 0.2s ease-out;
    }
    &:hover img {
      transform: translateY(5px);
      transition: transform 0.3s cubic-bezier(0.42, 0, 0, 2.42);
    }
  }

  #home__hero_bg {
    grid-area: 1 / 1 / -1 / -1;
    z-index: 0;
    height: 100%;
    width: 100%;
    object-fit: cover;
    object-position: center;
    filter: brightness(0.7);
  }
}


#testimonial {
  width: 90%;
  @media only screen and (min-width: 768px) {
    width: 80%;
  }
  @media only screen and (min-width: 992px) {
    width: 70%;
 }
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 2em;
  @media only screen and (min-width: 768px) {
    padding: 4em;
  }
  margin: 3em 0;
  background: linear-gradient(100deg, #621837, #47193b 40%);

  .quote {
    max-width: 70ch;
    position: relative;

    & > img {
      position: absolute;
      top: -15px;
      left: -20px;
    }

    p {
      position: relative;
      z-index: 1;
      font-size: 1.2em;
      @media only screen and (min-width: 576px) {
        font-size: 1.3em;
      }
      margin-bottom: 1em;
    }
  }

  .quote__author {
    display: flex;
    align-items: center;
    color: rgb(228, 228, 228);

    & > img {
      height: 40px;
      width: 40px;
      border-radius: 100%;
      margin-right: 1rem;
    }
  }
}


#sponsors {
  color: white;
  padding: 2rem;
  margin-bottom: 2rem;
  display: flex;
  flex-direction: column;
  align-items: center;

  #sponsors__text {
    text-align: center;
    margin-bottom: 2rem;

    h2 {
      margin-bottom: 0.5em;
    }
    a {
      color: var(--pink);
    }
  }

  #sponsors__logos {
    display: flex;
    width: 80%;
    @media only screen and (min-width: 992px) {
      width: 60%;
    }
    flex-wrap: wrap;
    justify-content: center;

    img {
      max-height: 100px;
      margin: 1rem;
    }
  }
}
</style>
