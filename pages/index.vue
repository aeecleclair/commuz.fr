<template lang="html">
<div>
  <navbar class="abs"></navbar>
  <div id="home__hero">
    <!-- COMMUZ en gros de la page d'acceuil -->
    <svg version="1.1" id="home__hero__logo" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px"
	 y="0px" viewBox="0 0 524 208" style="enable-background:new 0 0 524 208;" xml:space="preserve">
<style type="text/css">
	.st0{fill:#FFFFFF;}
</style>
<g>
	<g>
		<g>
			<g>
				<path class="st0" d="M132.5,84.3c0.3,3.1,0.8,7.2,1.9,11.9c1.7,7.2,3.9,12.2,4.4,13.5c2.2,4.9,3.9,8.7,7.6,12.8
					c3.6,3.9,7.3,6.2,9,7.2c3.2,1.9,6.1,3.1,8.4,3.8c-0.5,1-1,2.4-1.7,3.6c-1.2,1.8-2.4,3.6-3.8,5.3c-2.2,2.8-5.6,6.3-11,7.9
					c-6.1,1.8-11.3-0.1-13.2-0.8c-4.1-1.5-6.9-3.8-8.1-4.9c-2.8-2.4-3.2-3.5-7.7-8.2c-1.4-1.5-2.9-2.8-4.4-4.2
					c-2.6-2.5-4.2-5.6-5.3-9c-0.5-1.7-1.5-4.8-3.1-11.2c-1.4-5.7-1.8-7.6-2-8.5c-0.5-2.3-0.7-4.1-1.2-7.8c-0.3-2.4-0.5-3.4-0.5-4.6
					c0-0.9-0.1-3.2,0.2-5.3c0.6-4.5,2.7-7.9,4-9.9c2.3-3.6,4.9-6.1,7.2-7.8c-0.7,1-1.8,2.5-2.9,4.3c-2.1,3.7-3.4,6.2-3.5,9.3
					c-0.1,2.3,0.9,4.2,2.5,5.9c0.7,0.7,2.4,0.4,3-0.3c1.1-1.4,2.1-2.8,3.9-3.2c1.6-0.4,3.1,0.1,4.4,1.1c1.3,1,2.5,2,4.3,2.1
					C127.5,87.3,130.2,85.8,132.5,84.3z M129.2,111.1c-0.9-1-1.6-2.2-2.6-2.9c-3.3-2.4-7.2-2.5-11-2.3c-0.1,0-0.3,0.1-0.4,0.2
					c-1.3,1-2.7,2-4,3c-0.2,0.1-0.3,0.6-0.2,0.7c0.7,1,1.4,2.2,2.1,2.7c4.5,3,9.6,2,9.6,2C125.8,113.9,128.1,112.1,129.2,111.1z"/>
			</g>
			<g>
				<path class="st0" d="M144.1,81.2c-0.3-2.2-0.6-5.4-0.7-9.3c-0.2-5.3-0.4-9.4,0.1-12.9c1.7-12.2,12.1-24.7,22.5-25.6
					c0.1,0-2.7,8.1-2.7,8.1s2.7-2.2,9.7-2.2c-1.2,2.5-3.3,7.3-3.3,7.5c0.2,0,6.3-3,13.8-1c-3.5,3.4-6.8,11.5-7.3,11.7
					c-6.9,2.4-14,6.2-20.2,10.8c-3.2,2.4-5.6,5.2-7.7,7.5C146.5,78,145.1,79.8,144.1,81.2z"/>
			</g>
			<g>
				<path class="st0" d="M109.9,84.8c-2.1-3.9-1.1-7.6,1.2-11.1c2.9-4.4,4.6-6.4,9.2-8.7c4.9-2.4,12.6-3.3,17.8-4.1
					c0.2,0,0.5,0,1.1,0c-1,0.8-3.1,2.8-4.3,6.1c-1,2.8-0.9,5.3-0.8,6.6c0,0-12.6,0.6-17.3,4.9C114.6,80.7,112.3,82.8,109.9,84.8z"/>
			</g>
			<g>
				<path class="st0" d="M143.8,106.9c0.1-2.4,0.9-4.1,1.4-4.9c0.8-1.3,1.7-2.2,2.4-2.9c0.8-0.7,1.9-1.8,3.3-2.4
					c2.7-1.2,5.4-0.6,6.7-0.2c0.1,0.5,0.3,1.4,0.1,2.3c-0.1,0.7-0.4,1.6-1.5,3c-0.7,0.9-2.5,3.1-5.7,4.4c-2.5,1-4.7,0.9-5.1,0.9
					C144.7,107.1,144.2,107,143.8,106.9z"/>
			</g>
			<g>
				<path class="st0" d="M154.1,93.3c-1.7-0.1-3,0.1-3.9,0.3c-0.8,0.2-1.8,0.4-2.9,1.1c-1.1,0.7-1.4,1.2-2.2,1.9
					c-0.8,0.6-2,1.4-4,1.8c0.4-0.8,2-3.4,5.2-4.8C150,92,153.3,93,154.1,93.3z"/>
			</g>
		</g>
	</g>
	<g>
		<path class="st0" d="M86.7,75.9L80.9,81c-3.2-4.8-7.1-8.5-11.6-10.9c-4.5-2.5-9.5-3.7-14.9-3.7c-5.9,0-11.4,1.6-16.4,4.9
			c-5,3.3-8.9,7.6-11.7,13.1s-4.1,11.7-4.1,18.5c0,10.4,3.1,19,9.3,25.9c6.2,6.9,14,10.4,23.4,10.4c10.4,0,19-4.7,26-14l5.8,5.1
			c-3.7,5.4-8.3,9.6-13.8,12.5c-5.5,2.9-11.7,4.4-18.5,4.4c-12.9,0-23.1-4.9-30.6-14.8c-6.3-8.4-9.4-18.4-9.4-30.3
			c0-12.4,3.8-22.9,11.4-31.4C33.4,62.2,42.9,58,54.3,58c6.9,0,13.1,1.6,18.7,4.7C78.6,65.8,83.2,70.2,86.7,75.9z"/>
		<path class="st0" d="M183.7,145l10.6-84.9h1.2l30.1,69.7l29.8-69.7h1.2l10.6,84.9h-7.2l-7.3-60.7L226.4,145h-1.9l-26.5-61.2
			l-7.3,61.2H183.7z"/>
	</g>
	<g>
		<path class="st0" d="M289,172.4l10.9-84.9h1.2l30.9,69.7l30.6-69.7h1.2l11,84.9h-7.5l-7.5-60.7L333,172.4H331l-27.2-61.2
			l-7.5,61.2H289z"/>
		<path class="st0" d="M395.4,87.5h7.6v51.3c0,6.1,0.1,9.9,0.3,11.4c0.4,3.3,1.3,6.1,2.6,8.4s3.5,4.1,6.4,5.7
			c2.9,1.5,5.7,2.3,8.6,2.3c2.5,0,4.9-0.6,7.2-1.8c2.3-1.2,4.2-2.8,5.8-5c1.6-2.1,2.7-4.7,3.4-7.7c0.5-2.2,0.8-6.6,0.8-13.3V87.5
			h7.6v51.3c0,7.6-0.7,13.7-2,18.4c-1.3,4.7-4,8.7-8,12.2c-4,3.5-8.8,5.2-14.5,5.2c-6.1,0-11.4-1.6-15.8-4.9s-7.3-7.6-8.8-13
			c-0.9-3.3-1.4-9.3-1.4-17.9V87.5z"/>
		<path class="st0" d="M466.9,95.7v-8.2H507l-31.8,76.6h30.2v8.3h-42l32.1-76.7H466.9z"/>
	</g>
	<g>
		<path class="st0" d="M508.7,62.9H289.4c-0.5,0-0.9-0.4-0.9-0.9s0.4-0.9,0.9-0.9h219.3c0.5,0,0.9,0.4,0.9,0.9
			S509.2,62.9,508.7,62.9z"/>
	</g>
	<g>
		<path class="st0" d="M269.4,173.3H20.5c-0.5,0-0.9-0.4-0.9-0.9s0.4-0.9,0.9-0.9h248.9c0.5,0,0.9,0.4,0.9,0.9
			S269.9,173.3,269.4,173.3z"/>
	</g>
</g>
</svg>
    <a id="home__hero__scroll" onclick="window.scrollTo(0,document.querySelector('#home__hero ~ div').offsetTop)"><img src="/icons/scroll-down.svg" alt="Flèche basse">Découvrir</a>
    <video id="home__hero_bg" poster="/images/poster-video-accueil.jpg" autoplay loop>
      <source src="/videos/video_intro_webm.webm" type="video/webm">
      <source src="/videos/video_intro_mp4.mp4" type="video/mp4">
    </video>
  </div>

  <pane :type="'pane--left'" :bgImage="'/images/danseurs-2019.jpg'" :text="presentation"></pane>
  <pane :type="'pane--right'" :bgImage="'/images/spectacleAaZ.jpg'" :text="maquillage"></pane>

  <section id="testimonial">
    <div class="quote">
      <p>J'ai pris hier soir un grand plaisir, le spectacle est de grande qualité, son, lumière, costumes magnifiques, décors, le tout au service d'artistes de talents : musiciens, danseurs, chanteurs, acteurs-chanteurs.</p>
      <img src="/icons/quote_open.svg" alt="Guillemets">
      <div class="quote__author">
        <img src="/images/debouck.jpg" alt="Photo de Frank Debouck">
        <span>Frank Debouck &ndash; Directeur de l'École Centrale de Lyon</span>
      </div>
    </div>
  </section>

  <section id="sponsors">
    <div id="sponsors__text">
      <h2>Ils nous ont soutenus</h2>
      <p>Vous aussi, entrez en scène à nos côtés !</p>
      <p>Téléchargez la <a class="inline-link" href="/Plaquette 2021.pdf" download>plaquette sponsors</a>, ou contactez nos responsables partenariats <router-link class="inline-link" active-class="navbar__link--active" to="/partenariats"><span>Pauline, Jonathan et Julie.</span></router-link></p>
      
    </div>
    <div id="sponsors__logos">
      <a href="https://www.ec-lyon.fr/" target="_blank" rel="noopener"><img src="/logos/ecl.svg" alt="Logo de l'École Centrale de Lyon"></a>
      <a href="https://www.em-lyon.com" target="_blank" rel="noopener"><img src="/logos/em_corpo.svg" alt="Logo de la corpo emlyon business school"></a>
      <a href="http://www.crous-lyon.fr/" target="_blank" rel="noopener"><img src="/logos/crous.png" alt="Logo du Crous de Lyon"></a>
      <a href="https://www.universite-lyon.fr/" target="_blank" rel="noopener"><img src="/logos/udl.svg" alt="Logo de l'Université de Lyon"></a>
      <!--<img src="/logos/petitballon.svg" alt="Logo de Le Petit Ballon">-->
    </div>
  </section>
</div>
</template>

<script>
import Navbar from "@/components/Navbar";
import Pane from "@/components/Pane";
import bus from "@/components/bus";
import anime from "animejs";

function startAnim() {
  // animate hero logo
  if (!document.hidden) {
    document.removeEventListener("visibilitychange", startAnim);

    let lettersElt = document.querySelectorAll(
      "#home__hero__logo path:not(:nth-child(6)):not(:nth-last-child(-n+2)"
    );
    let linesElt = document.querySelectorAll(
      "#home__hero__logo path:nth-last-child(-n+2)"
    );

    var timeline = anime.timeline();

    timeline
      .add({
        targets: lettersElt,
        opacity: {
          value: ["0", "1"],
          duration: 500,
        },
        translateY: {
          value: ["-30%", "0"],
          duration: 800,
        },
        delay: function (el, i, l) {
          return i * 300;
        },
        easing: "easeOutQuart",
      })
      .add({
        targets: linesElt[0],
        "stroke-dasharray": {
          value: ["210, 315, 0", "210, 210, 210"],
          duration: 1000,
        },
        easing: "linear",
        offset: "0",
      })
      .add({
        targets: linesElt[1],
        "stroke-dasharray": {
          value: ["262, 393, 0", "262, 262, 262"],
          duration: 1500,
        },
        easing: "linear",
        offset: "0",
      });
  }
}

let data = {
  presentation:
    "<h2>La Commuz', c'est quoi ?</h2>" +
    "<p>La Commuz' est une comédie musicale organisée chaque année depuis 18 ans par une équipe de 80 étudiants de l'École Centrale de Lyon et de emlyon business school.</p>" +
    "<p>L'année dernière, la Commuz' 2019, Désorientés, a conquis plus de 1000 spectateurs lors de quatre soirées de spectacle.</p>",
  maquillage:
    "<h2>Un spectacle imaginé de A à Z</h2>" +
    "<p>De l'élaboration du scénario en passant par les chorégraphies, la composition et l'orchestration des musiques, la mise en place de l'éclairage et du son, la création des costumes et des décors&hellip;</p>" +
    "<p>Tous les corps de métier du théâtre, du chant et de la danse sont réunis pour créer ce spectacle qui se veut d'une qualité professionnelle.</p>",
};

export default {
  components: { Navbar, Pane },
  data: function () {
    return data;
  },
  mounted: function () {
    // document.addEventListener('visibilitychange', startAnim)
    // startAnim()
    bus.$on("loaded", function (load) {
      if (load === true) {
        document.addEventListener("visibilitychange", startAnim);
        startAnim();
      }
    });
  },
};
</script>

<style lang="scss">
#home__hero {
  position: relative;
  width: 100%;
  height: 80vh;
  @media (orientation: landscape) {
    height: 100vh;
  }
  margin-bottom: 2em;
  display: grid;
  grid-template-columns: 100%;
  grid-template-rows: 1fr auto 1fr;
  align-items: center;
  justify-items: center;

  #home__hero__logo {
    grid-area: 2 / 1 / 3 / -1;
    z-index: 1;
    width: 75%;
    @media (min-width: 992px) {
      width: 50%;
    }
  }

  #home__hero__scroll {
    grid-area: 3 / 1 / -1 / -1;
    z-index: 1;
    align-self: flex-start;
    // color: #e6e6e6;
    font-size: 1.5em;
    margin-top: 1.5em;
    cursor: pointer;
    user-select: none;

    img {
      transition: transform 0.2s ease-out;
    }
    &:hover img {
      transform: translateY(5px);
      transition: transform 0.3s cubic-bezier(0.42, 0, 0, 2.42);
    }
  }

  #home__hero_bg {
    grid-area: 1 / 1 / -1 / -1;
    z-index: 0;
    height: 100%;
    width: 100%;
    object-fit: cover;
    object-position: center;
    filter: brightness(0.7);
  }
}

#testimonial {
  width: 90%;
  @media only screen and (min-width: 768px) {
    width: 80%;
  }
  @media only screen and (min-width: 992px) {
    width: 70%;
  }
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 2em;
  @media only screen and (min-width: 768px) {
    padding: 4em;
  }
  margin: 3em 0;
  background: linear-gradient(100deg, #621837, #47193b 40%);

  .quote {
    max-width: 70ch;
    position: relative;

    & > img {
      position: absolute;
      top: -15px;
      left: -20px;
    }

    p {
      position: relative;
      z-index: 1;
      font-size: 1.2em;
      @media only screen and (min-width: 576px) {
        font-size: 1.3em;
      }
      margin-bottom: 1em;
    }
  }

  .quote__author {
    display: flex;
    align-items: center;
    color: rgb(228, 228, 228);

    & > img {
      height: 40px;
      width: 40px;
      border-radius: 100%;
      margin-right: 1rem;
    }
  }
}

#sponsors {
  color: white;
  padding: 2rem;
  margin-bottom: 2rem;
  display: flex;
  flex-direction: column;
  align-items: center;

  #sponsors__text {
    text-align: center;
    margin-bottom: 2rem;

    h2 {
      margin-bottom: 0.5em;
    }
    a {
      color: var(--pink);
    }
  }

  #sponsors__logos {
    display: flex;
    width: 80%;
    @media only screen and (min-width: 992px) {
      width: 60%;
    }
    flex-wrap: wrap;
    justify-content: center;

    img {
      max-height: 100px;
      margin: 1rem;
    }
  }
}
</style>
